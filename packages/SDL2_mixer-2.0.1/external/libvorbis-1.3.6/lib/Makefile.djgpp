CFLAGS  = -Wall -O2 -ffast-math -fsigned-char -I../include
#CFLAGS += -DHAVE_INTTYPES_H -DHAVE_STDINT_H
LIBNAME = libvorbis.a
LIBNAME2= libvorbisfile.a

ifeq ($(CROSS),1)
PREFIX=i586-pc-msdosdjgpp-
else
PREFIX=
endif
CC      = $(PREFIX)gcc
AR      = $(PREFIX)ar
RANLIB  = $(PREFIX)ranlib

OBJ = mdct.o smallft.o block.o envelope.o window.o lsp.o lpc.o analysis.o synthesis.o psy.o info.o floor1.o floor0.o res0.o mapping0.o registry.o codebook.o sharedbook.o bitrate.o
# lookup.o
OBJ2= vorbisfile.o

all: $(LIBNAME) $(LIBNAME2)

%.o: %.c
	$(CC) $(CFLAGS) -c -o $@ $<

$(LIBNAME): $(OBJ)
	$(AR) cru $(LIBNAME) $(OBJ)
	$(RANLIB) $(LIBNAME)
$(LIBNAME2): $(OBJ2)
	$(AR) cru $(LIBNAME2) $(OBJ2)
	$(RANLIB) $(LIBNAME2)

clean:
	rm -f *.o
distclean: clean
	rm -f *.a
