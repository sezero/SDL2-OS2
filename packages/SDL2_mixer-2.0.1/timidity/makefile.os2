INCPATH = ../../../h

OBJS = common.obj instrum.obj mix.obj output.obj playmidi.obj &
       readmidi.obj resample.obj tables.obj timidity.obj

CFLAGS = -zq -bt=os2 -bm -fp5 -fpi87 -mf -oeatxh -w4 -ei -j -zp8
# -5s  :  Pentium stack calling conventions.
# -5r  :  Pentium register calling conventions.
CFLAGS+= -5s
# for SDL DECLSPEC:
CFLAGS+= -DBUILD_SDL
# include paths:
CFLAGS+= -I. -I$(INCPATH)/SDL2

all: timidity.lib

.SUFFIXES:
.SUFFIXES: .obj .c .asm .nasm

timidity.lib: $(OBJS)
  wlib -b -n -q -c -pa -s -t -zld -ii -io $@ $(OBJS)

.c.obj:
  wcc386 $(CFLAGS) -fo=$^@ $<

clean: .SYMBOLIC
  @if exist *.obj rm *.obj
  @if exist *.err rm *.err
  @if exist timidity.lib rm timidity.lib
