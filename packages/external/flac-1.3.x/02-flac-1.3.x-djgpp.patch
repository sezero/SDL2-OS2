diff -u flac-1.3.x-dec/configure.ac~ flac-1.3.x-dec/configure.ac
--- flac-1.3.x-dec/configure.ac~
+++ flac-1.3.x-dec/configure.ac
@@ -103,6 +103,7 @@
 	*-*-cygwin|*mingw*) OBJ_FORMAT=win32 ;;
 	*-*-darwin*) OBJ_FORMAT=macho ;;
 	*emx*) OBJ_FORMAT=aout ;;
+	*djgpp) OBJ_FORMAT=coff ;;
 	*) OBJ_FORMAT=elf ;;
 esac
 AC_SUBST(OBJ_FORMAT)
diff -u flac-1.3.x-dec/include/share/compat.h~ flac-1.3.x-dec/include/share/compat.h
--- flac-1.3.x-dec/include/share/compat.h~
+++ flac-1.3.x-dec/include/share/compat.h
@@ -105,7 +105,7 @@
 #define FLAC__U64L(x) x##LLU
 #endif
 
-#if defined _MSC_VER || defined __BORLANDC__ || defined __MINGW32__ || defined __WATCOMC__ || defined __EMX__
+#if defined _MSC_VER || defined __BORLANDC__ || defined __MINGW32__ || defined __WATCOMC__ || defined __EMX__ || defined __DJGPP__
 #define FLAC__STRNCASECMP strnicmp
 #else
 #define FLAC__STRNCASECMP strncasecmp
@@ -114,6 +114,10 @@
 #if defined _MSC_VER || defined __MINGW32__ || defined __EMX__ || defined __WATCOMC__
 #include <io.h> /* for _setmode(), chmod() */
 #include <fcntl.h> /* for _O_BINARY */
+#elif defined __DJGPP__
+#include <io.h>
+#include <fcntl.h>
+#include <unistd.h>
 #else
 #include <unistd.h> /* for chown(), unlink() */
 #endif
diff -u flac-1.3.x-dec/src/libFLAC/ia32/nasm.h~ flac-1.3.x-dec/src/libFLAC/ia32/nasm.h
--- flac-1.3.x-dec/src/libFLAC/ia32/nasm.h~
+++ flac-1.3.x-dec/src/libFLAC/ia32/nasm.h
@@ -48,6 +48,11 @@
 	%idefine code_section section .text
 	%idefine data_section section .data
 	%idefine bss_section  section .bss
+%elifdef OBJ_FORMAT_coff
+	%define FLAC__PUBLIC_NEEDS_UNDERSCORE
+	%idefine code_section section .text
+	%idefine data_section section .data
+	%idefine bss_section  section .bss
 %elifdef OBJ_FORMAT_macho
 	%define FLAC__PUBLIC_NEEDS_UNDERSCORE
 	%idefine code_section section .text
diff -u flac-1.3.x-dec/src/libFLAC/lpc.c~ flac-1.3.x-dec/src/libFLAC/lpc.c
--- flac-1.3.x-dec/src/libFLAC/lpc.c~
+++ flac-1.3.x-dec/src/libFLAC/lpc.c
@@ -72,7 +72,7 @@
    return lrint(x);
 }
 #endif
-#if !defined(HAVE_LROUND)
+#if !defined(HAVE_LROUND) || defined(__DJGPP__)
 #if defined(_MSC_VER)
 #include <float.h>
 #define copysign _copysign
diff -up flac-1.3.x-dec/src/libFLAC/metadata_iterators.c~ flac-1.3.x-dec/src/libFLAC/metadata_iterators.c
--- flac-1.3.x-dec/src/libFLAC/metadata_iterators.c~
+++ flac-1.3.x-dec/src/libFLAC/metadata_iterators.c
@@ -3354,7 +3354,7 @@ void set_file_stats_(const char *filenam
 	srctime.modtime = stats->st_mtime;
 	(void)flac_chmod(filename, stats->st_mode);
 	(void)flac_utime(filename, &srctime);
-#if !defined _MSC_VER && !defined __BORLANDC__ && !defined __MINGW32__ && !defined __OS2__ && !defined __NT__
+#if !defined _MSC_VER && !defined __BORLANDC__ && !defined __MINGW32__ && !defined __OS2__ && !defined __NT__ && !defined __DJGPP__
 	FLAC_CHECK_RETURN(chown(filename, stats->st_uid, -1));
 	FLAC_CHECK_RETURN(chown(filename, -1, stats->st_gid));
 #endif

diff -u flac-1.3.x-dec/configure~ flac-1.3.x-dec/configure
--- flac-1.3.x-dec/configure~
+++ flac-1.3.x-dec/configure
@@ -14617,12 +14617,12 @@
   FLaC__CPU_SPARC_FALSE=
 fi
 
-
 case "$host" in
 	i386-*-openbsd3.[0-3]) OBJ_FORMAT=aoutb ;;
 	*-*-cygwin|*mingw*) OBJ_FORMAT=win32 ;;
 	*-*-darwin*) OBJ_FORMAT=macho ;;
 	*emx*) OBJ_FORMAT=aout ;;
+	*djgpp) OBJ_FORMAT=coff ;;
 	*) OBJ_FORMAT=elf ;;
 esac
 
